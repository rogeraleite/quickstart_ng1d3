<link href="styles/cp-markus.css" rel="stylesheet"></link>

 <div class="panel-group">
      <div>* in case of malfunction, please reload the page, clear the cache (ctrl + shift + del), or try another browser. This prototype was developed using Google Chrome Version 56.0.2924.87.</div>
      <br>
      <div class="col-md-6">
            <div class="col-md-12">
                  <div class="panel panel-default" >
                      <div class="panel-heading">Distance-based cycle plot</div>
                      <div class="panel-body">
                              <robustcp></robustcp>
                      </div>
                  </div>
            </div>
            <div class="col-md-12">
              <div class="panel panel-default" >
                        <div class="panel-heading">Control panel</div>
                        <div class="panel-body control-panel">
                                <!--div class="col-md-2">
                                    <h5>cycleplot:</h5>
                                    <input id="checkbox-cp" type="checkbox" name="my-checkbox" checked>
                                </div>
                                <div class="col-md-2">
                                    <h5>lineplot:</h5>
                                    <input id="checkbox-lc" type="checkbox" name="my-checkbox" checked>
                                </div-->
                                <div class="col-md-2">
                                    <h5>Outlier detect</h5>
                                    <input id="checkbox-cor-slider" type="checkbox" name="my-checkbox">
                                </div>
                                <div class="col-md-2">
                                    <h5>Detailed view</h5>
                                    <input id="checkbox-sp" type="checkbox" name="my-checkbox">
                                </div>
                                <!--div class="col-md-2">
                                    <h5>coloring_old:</h5>
                                    <input id="checkbox-cor" type="checkbox" name="my-checkbox" checked>
                                </div-->
                                <div class="col-md-2">
                                    <h5>Selection</h5>
                                    <button id="bt-reset" type="button" class="btn btn-default">reset</button>
                                </div>
                                <div id="slider-panel" class="col-md-12 outlier-detect-panel" background="#D3D3D3">
                                    <h4>Outlyingness</h4>

                                    
                                    <div class="col-md-2">
                                      <h5>Linked</h5>
                                      <input id="checkbox-linked" type="checkbox" name="my-checkbox" checked>
                                    </div>
                                    <div class="col-md-4">
                                      <h5 class="col-md-9">Multivariate limit </h5>
                                      <h5 id="out_mult" class="col-md-1">null</h5>
                                      <input id="slider12a" type="text"/>
                                    </div>
                                    
                                    <div class="col-md-4">
                                      <h5 class="col-md-9">Univariate limit </h5>
                                      <h5 id="out_uni" class="col-md-1">null</h5>
                                      <input id="slider12b" type="text"/>
                                    </div>
                                    <div class="col-md-2">
                                      <h6>Type of outlier </h6>

                                      <table style="width:100%">
                                        <tr>
                                          <td class="multi-colored">&nbsp&nbsp&nbsp&nbsp</td>
                                          <td>&nbspmultivariate</td> 
                                        </tr>
                                        <tr>
                                          <td class="uni-colored">&nbsp&nbsp&nbsp&nbsp</td>
                                          <td>&nbspunivariate</td> 
                                        </tr>
                                        <tr>
                                          <td class="both-colored">&nbsp&nbsp&nbsp&nbsp</td>
                                          <td>&nbspmulti- &</td> 
                                        </tr>
                                        <tr>
                                          <td>&nbsp&nbsp&nbsp</td>
                                          <td>&nbspunivariate</td> 
                                        </tr>
                                      </table>
                                      
                                      <!--span class="label label-info multi-colored"></span><span>&nbsp multivariate</span>
                                      <br>
                                      <span class="label label-info uni-colored">     </span><span>&nbsp univariate</span>
                                      <br>
                                      <span class="label label-info both-colored">  </span><span>&nbsp multi- & univariate</span-->
                                    </div>
                                </div>
                        </div>
                    </div>
            </div>
      </div>

      <div class="col-md-6 detailed-plot box">
            <div class="col-md-6">
                <div class="panel panel-default cycle-plot" >
                    <div class="panel-heading"> Cardio - Cycle plot</div>
                    <div class="panel-body">
                              <cardiocp></cardiocp>
                    </div>
                </div>
                <div class="panel panel-default cycle-plot" >
                    <div class="panel-heading">Mean SO2 - Cycle plot</div>
                    <div class="panel-body">
                              <meanso2cp></meanso2cp>
                    </div>
                </div>
                <div class="panel panel-default cycle-plot" >
                    <div class="panel-heading">Mean NO2 - Cycle plot</div>
                    <div class="panel-body">
                              <meanno2cp></meanno2cp>
                    </div>
                </div>
                <div class="panel panel-default cycle-plot" >
                    <div class="panel-heading">Mean PM10 - Cycle plot</div>
                    <div class="panel-body">
                               <meanpm10cp></meanpm10cp>
                    </div>
                </div>
                <div class="panel panel-default cycle-plot" >
                    <div class="panel-heading">Mean temperature - Cycle plot</div>
                    <div class="panel-body">
                               <meantempcp></meantempcp>
                    </div>
                </div>
                <div class="panel panel-default cycle-plot" >
                    <div class="panel-heading">Mean humidity - Cycle plot</div>
                    <div class="panel-body">
                              <meanhumicp></meanhumicp>
                    </div>
              </div>
            </div>
            <div class="col-md-6">
                <div class="panel panel-default line-plot" >
                      <div class="panel-heading">Cardio - Time series line plot</div>
                      <div class="panel-body">
                                <cardiolc></cardiolc>
                      </div>
                </div>
                <div class="panel panel-default line-plot" >
                    <div class="panel-heading">Mean SO2 - Time series line plot</div>
                    <div class="panel-body">
                              <meanso2lc></meanso2lc>
                    </div>
                </div>
                <div class="panel panel-default line-plot" >
                      <div class="panel-heading">Mean NO2 - Time series line plot</div>
                      <div class="panel-body">
                                <meanno2lc></meanno2lc>
                      </div>
                </div>
                <div class="panel panel-default line-plot" >
                    <div class="panel-heading">Mean PM10 - Time series line plot</div>
                    <div class="panel-body">
                               <meanpm10lc></meanpm10lc>
                    </div>
                </div>
                <div class="panel panel-default line-plot" >
                      <div class="panel-heading">Mean temperature - Time series line plot</div>
                      <div class="panel-body">
                                 <meantemplc></meantemplc>
                      </div>
                </div>
                <div class="panel panel-default line-plot" >
                    <div class="panel-heading">Mean humidity - Time series line plot</div>
                    <div class="panel-body">
                              <meanhumilc></meanhumilc>
                    </div>
                </div>
            </div>
      </div>

      <div class="col-md-6 sparkline-plot box">
            <div class="col-md-6">
                <div class="panel panel-default cycle-plot" >
                    <div class="panel-heading"> Cardio - Cycle plot</div>
                    <div class="panel-body">
                              <cardiocp-spark></cardiocp-spark>
                    </div>
                </div>
                <div class="panel panel-default cycle-plot" >
                    <div class="panel-heading">Mean SO2 - Cycle plot</div>
                    <div class="panel-body">
                              <meanso2cp-spark></meanso2cp-spark>
                    </div>
                </div>
                <div class="panel panel-default cycle-plot" >
                    <div class="panel-heading">Mean NO2 - Cycle plot</div>
                    <div class="panel-body">
                              <meanno2cp-spark></meanno2cp-spark>
                    </div>
                </div>
                <div class="panel panel-default cycle-plot" >
                    <div class="panel-heading">Mean PM10 - Cycle plot</div>
                    <div class="panel-body">
                               <meanpm10cp-spark></meanpm10cp-spark>
                    </div>
                </div>
                <div class="panel panel-default cycle-plot" >
                    <div class="panel-heading">Mean temperature - Cycle plot</div>
                    <div class="panel-body">
                               <meantempcp-spark></meantempcp-spark>
                    </div>
                </div>
                <div class="panel panel-default cycle-plot" >
                    <div class="panel-heading">Mean humidity - Cycle plot</div>
                    <div class="panel-body">
                              <meanhumicp-spark></meanhumicp-spark>
                    </div>
              </div>
            </div>
            <div class="col-md-6">
                <div class="panel panel-default line-plot" >
                      <div class="panel-heading">Cardio - Time series line plot</div>
                      <div class="panel-body">
                                <cardiolc-spark></cardiolc-spark>
                      </div>
                </div>
                <div class="panel panel-default line-plot" >
                    <div class="panel-heading">Mean SO2 - Time series line plot</div>
                    <div class="panel-body">
                              <meanso2lc-spark></meanso2lc-spark>
                    </div>
                </div>
                <div class="panel panel-default line-plot" >
                      <div class="panel-heading">Mean NO2 - Time series line plot</div>
                      <div class="panel-body">
                                <meanno2lc-spark></meanno2lc-spark>
                      </div>
                </div>
                <div class="panel panel-default line-plot" >
                    <div class="panel-heading">Mean PM10 - Time series line plot</div>
                    <div class="panel-body">
                               <meanpm10lc-spark></meanpm10lc-spark>
                    </div>
                </div>
                <div class="panel panel-default line-plot" >
                      <div class="panel-heading">Mean temperature - Time series line plot</div>
                      <div class="panel-body">
                                 <meantemplc-spark></meantemplc-spark>
                      </div>
                </div>
                <div class="panel panel-default line-plot" >
                    <div class="panel-heading">Mean humidity - Time series line plot</div>
                    <div class="panel-body">
                              <meanhumilc-spark></meanhumilc-spark>
                    </div>
                </div>
            </div>
      </div>


 </div>

<!--
<script>
    //positioning rebels SVG that insisted on being out of the DOM scope
    $(document).ready(function(){
        var color_array = ["#969696","#A6BDDB","#3690C0","#045A8D"];
        var new_color_array = ["#969696", //normal 
                               "#FE861B", //multivariate outliers
                               "#03BDE6", //univariate outliers
                               "#FC208F"];// multi AND uni outliers
        var single_color = "#de2d26";
        var slider_start = 0.75;
        var linked_slider = true;
        var borders = [0.95,0.975,0.999];
        setTimeout(function() {

          var init = function(){
                 //SIZE setup
                 $(".container").eq(1).css("margin","30");
                 $(".container").eq(1).css("width","1700px");
                 $(".container").eq(1).css("height","800px");
                 
                 $(".panel.panel-default").css("margin-top",0);//fix
                 $(".panel.panel-default").css("padding",0);//fix
                 $(".panel-body").css("padding",0);//fix
                 $(".col-md-3").css("padding-lef",6);//fix
                 $(".col-md-3").css("padding-right",3);//fix
                 $(".col-md-6").css("padding-left",4);//fix
                 $(".col-md-6").css("padding-right",4);//fix
                 $(".control-panel").css("padding-bottom",20);
                 $(".control-panel").css("padding-top",6);

                 //PANELS & SVG setup
                 $('#robustcp')[0].appendChild($('svg')[0]);

                 $('#cardiocp')[0].appendChild($('svg')[1]);
                 $('#meanso2cp')[0].appendChild($('svg')[2]);
                 $('#meanno2cp')[0].appendChild($('svg')[3]);
                 $('#meanpm10cp')[0].appendChild($('svg')[4]);
                 $('#meantempcp')[0].appendChild($('svg')[5]);
                 $('#meanhumicp')[0].appendChild($('svg')[6]);

                 $('#cardiolc')[0].appendChild($('svg')[7]);
                 $('#meanso2lc')[0].appendChild($('svg')[8]);
                 $('#meanno2lc')[0].appendChild($('svg')[9]);
                 $('#meanpm10lc')[0].appendChild($('svg')[10]);
                 $('#meantemplc')[0].appendChild($('svg')[11]);
                 $('#meanhumilc')[0].appendChild($('svg')[12]);

                 $('#cardiocpSpark')[0].appendChild($('svg')[13]);
                 $('#meanso2cpSpark')[0].appendChild($('svg')[14]);
                 $('#meanno2cpSpark')[0].appendChild($('svg')[15]);
                 $('#meanpm10cpSpark')[0].appendChild($('svg')[16]);
                 $('#meantempcpSpark')[0].appendChild($('svg')[17]);
                 $('#meanhumicpSpark')[0].appendChild($('svg')[18]);

                 $('#cardiolcSpark')[0].appendChild($('svg')[19]);
                 $('#meanso2lcSpark')[0].appendChild($('svg')[20]);
                 $('#meanno2lcSpark')[0].appendChild($('svg')[21]);
                 $('#meanpm10lcSpark')[0].appendChild($('svg')[22]);
                 $('#meantemplcSpark')[0].appendChild($('svg')[23]);
                 $('#meanhumilcSpark')[0].appendChild($('svg')[24]);

                     // With JQuery
                 $("#slider12a").slider({ id:"slider-multi", min: 0.5, max: 1.00, value: slider_start, step: 0.01});
                 $("#slider12b").slider({ id:"slider-uni", min: 0.5, max: 1.00, value: slider_start, step: 0.01});

                 $(".slider-track").eq(0).attr("id","slider-multi");
                 $(".slider-track").eq(1).attr("id","slider-uni");




                 addBehaviorToID();
                 updateBorderPanel();
            }

              //DEPRECATED
             var getOutliernessByClass = function(str){
                  var splited = str.split(" ");
                  var outlierness;

                  for(var i=0; i<splited.length; i++){
                       if(splited[i].match("^m_out")){
                          outlierness = splited[i];
                          break;
                       }
                  }

                  outlierness = +outlierness.substring(3);
                  return outlierness;
             }
             var classConstructor = function(class_str, code, entry_str){
                  var splited = class_str.split(" ");
                  var m_out="", u_out="";

                  for(var i=0; i<splited.length; i++){
                       if(splited[i].match("^m_out")){
                          m_out = splited[i];
                       }
                       else if(splited[i].match("^u_out")){
                          u_out = splited[i];
                       }
                  }//end for

                  return (entry_str+" "+code+" "+m_out+" "+u_out);
             }
             //DEPRECATED
             var highlightSimilarByHover = function(el,id2,code2){
                 el.hover(function(){
                       if(el.is('.elem-off')){
                            $(id2).each( function(){

                                  var is_element_input = $(this).is("circle"); //true or false

                                   if(is_element_input){
                                      // var color = $("rect"+id2).attr("fill");
                                      // $(this).attr("fill",color);
                                      if($(this).attr("fill") === new_color_array[0]){
                                        var r = $(this).attr("r")*2;
                                        $(this).attr("r",r);
                                      }
                                  }

                                  var old_class = $(this).attr("class");
                                  var new_class = classConstructor(old_class, code2, "elem-on")
                                  
                                  $(this).attr("class", new_class);
                           })
                       }
                      else if(el.is(".elem-on")){
                            $(id2).each( function(){

                                   var is_element_input = $(this).is("circle"); //true or false

                                   if(is_element_input){
                                      // var color = $("rect"+id2).attr("fill");
                                      // $(this).attr("fill",color);
                                      if($(this).attr("fill") === new_color_array[0]){
                                        var r = $(this).attr("r")/2;
                                        $(this).attr("r",r);
                                      }
                                  }

                                  var old_class = $(this).attr("class");
                                  var new_class = classConstructor(old_class, code2, "elem-off")

                                  $(this).attr("class", new_class);
                            })
                      }
                  })
             }
             var highlightSimilarByClick = function(el, id2, code2){
                  el.click(function(){
                       if(el.is('.elem-off')){
                            $(id2).each( function(){

                                  var is_element_input = $(this).is("circle"); //true or false

                                   if(is_element_input){
                                      // var color = $("rect"+id2).attr("fill");
                                      // $(this).attr("fill",color);
                                      if($(this).attr("fill") === new_color_array[0]){
                                        var r = $(this).attr("r")*2;
                                        $(this).attr("r",r);
                                      }
                                  }

                                  var old_class = $(this).attr("class");
                                  var new_class = classConstructor(old_class, code2, "elem-on")
                                  
                                  $(this).attr("class", new_class);
                           })
                       }
                      else if(el.is(".elem-on")){
                            $(id2).each( function(){

                                   var is_element_input = $(this).is("circle"); //true or false

                                   if(is_element_input){
                                      // var color = $("rect"+id2).attr("fill");
                                      // $(this).attr("fill",color);
                                      if($(this).attr("fill") === new_color_array[0]){
                                        var r = $(this).attr("r")/2;
                                        $(this).attr("r",r);
                                      }
                                  }

                                  var old_class = $(this).attr("class");
                                  var new_class = classConstructor(old_class, code2, "elem-off");
                                  
                                  $(this).attr("class", new_class);
                            })
                      }
                  })
             }
             //SELECTION BEHAVIOR
             var addBehaviorToID = function(){
                    var m,y, id,code;
                     for(m=0;m<12;m++){
                          for(y=2000;y<2008;y++){

                              code = "id"+m+y;
                              id = "."+code;

                              $(id).each(function(){
                                    var el = $(this);

                                    var id2 = id;
                                    var code2 = code;

                                    highlightSimilarByHover(el, id2, code2);
                                    highlightSimilarByClick(el, id2, code2);

                              })//end each

                          }//end for
                     }//end for
                   }//end function

            //SWITCH
            $("[name='my-checkbox']").bootstrapSwitch();

            $('#checkbox-lc').on('switchChange.bootstrapSwitch', function (event, state) {
                      if(state){
                             $(".line-plot").show();
                      }
                      else{
                             $(".line-plot").hide();
                      }
            });
            $('#checkbox-cp').on('switchChange.bootstrapSwitch', function (event, state) {
                      if(state){
                             $(".cycle-plot").show();
                      }
                      else{
                             $(".cycle-plot").hide();
                      }
            });
            $('#checkbox-sp').on('switchChange.bootstrapSwitch', function (event, state) {
                      if(state){
                             $(".detailed-plot").show();
                             $(".sparkline-plot").hide();
                      }
                      else{
                             $(".detailed-plot").hide();
                             $(".sparkline-plot").show();
                      }
            });
            


            $('#checkbox-linked').on('switchChange.bootstrapSwitch', function (event, state) {
                             linked_slider = state;
            });

            //DEPRICATED
            var updateElementColors = function(){
                  if($('#checkbox-cor').bootstrapSwitch('state')){
                             $("rect").each(function(){
                                    var c = $(this).attr("class");
                                    var o = getOutliernessByClass(c);
                                    var color;
                                    if(o < borders[0] ){ color = color_array[0];}
                                    else if(o < borders[1]){ color = color_array[1];}
                                    else if(o < borders[2]){ color = color_array[2];}
                                    else { color = color_array[3];}
                                    $(this).attr("fill", color);
                             });
                             $("circle").each(function(){
                                    var c = $(this).attr("class");
                                    var o = getOutliernessByClass(c);
                                    var color;
                                    if(o < borders[0] ){ color = color_array[0];}
                                    else if(o < borders[1]){ color = color_array[1];}
                                    else if(o < borders[2]){ color = color_array[2];}
                                    else { color = color_array[3];}
                                    $(this).attr("fill", color);
                             });

                      }
                      else{
                             $("rect").attr("fill",color_array[0]);
                             $("circle").attr("fill",color_array[0]);
                      }
            }

            var getMultivariateOutliernessByClass = function(str){
                  var splited = str.split(" ");
                  var outlierness = "";

                  for(var i=0; i<splited.length; i++){
                       if(splited[i].match("^m_out")){
                          outlierness = splited[i];
                          break;
                       }
                  }
                  if(outlierness!==""){
                     outlierness = +outlierness.substring(5);
                  }
                  return outlierness;
            }
            var getUnivariateOutliernessByClass = function(str){
                  var splited = str.split(" ");
                  var outlierness = "";

                  for(var i=0; i<splited.length; i++){
                       if(splited[i].match("^u_out")){
                          outlierness = splited[i];
                          break;
                       }
                  }

                  if(outlierness!==""){
                     outlierness = +outlierness.substring(5);
                  }
                  return outlierness;
            }

            var updateRectElementColor = function(){
                var slider = $('#slider12a'); 
                if($('#checkbox-cor-slider').bootstrapSwitch('state')){

                        var new_value = parseFloat(slider.attr("value"));

                        $("rect").each(function(){
                             var c = $(this).attr("class");
                             var o = getMultivariateOutliernessByClass(c);
                             var color;
                             if(o <= new_value ){ color = new_color_array[0];}
                             else { color = new_color_array[1];}
                             $(this).attr("fill", color);
                         });
                                
                         if(linked_slider){
                             $('#slider12b').slider('setValue', new_value);
                          }

                  }
                  else{
                       $("rect").attr("fill", new_color_array[0]);
                  }
            }

            var updateCircleElementColor = function(){
                  var slider_multi = $('#slider12a');
                  var slider_uni = $('#slider12b');
                  var new_value_multi = parseFloat(slider_multi.attr("value"));
                  var new_value_uni = parseFloat(slider_uni.attr("value"));      

                  if($('#checkbox-cor-slider').bootstrapSwitch('state')){                                            

                         $("circle").each(function(){
                             var c = $(this).attr("class");
                             var m_out = getMultivariateOutliernessByClass(c);
                             var u_out = getUnivariateOutliernessByClass(c);
                             
                             if(m_out!=="" && u_out!==""){
                                 var u_out_gap = (1-new_value_uni)/2;
                                 var new_u_out_topborder = 1-u_out_gap;
                                 var new_u_out_bottomborder = u_out_gap;  

                                 var color;

                                 var is_u_outlier = ((new_u_out_bottomborder > u_out) ||  (u_out > new_u_out_topborder));
                                 var is_m_outlier = (new_value_multi < m_out);

                                 if(is_u_outlier &&  is_m_outlier){ 
                                    color = new_color_array[3];
                                 }
                                 else if(is_u_outlier){ color = new_color_array[2];}
                                 else if(is_m_outlier){ color = new_color_array[1];}
                                 else { color = new_color_array[0];}                               
                            }
                            else{
                                 color = new_color_array[0];
                            }
                            $(this).attr("fill", color);
                            if(color !== new_color_array[0]){
                              $(this).attr("r",3.5);
                            }
                            else{
                              $(this).attr("r",2);
                            }
                          });          

                          if(linked_slider){
                             $('#slider12a').slider('setValue', new_value_uni);
                          }               
                   }
                   else{
                          $("circle").attr("fill",new_color_array[0]);
                   }
            }

            $('#slider12a').slider()
                     .on({
                      slide: function(ev){
                          updateRectElementColor();

                          var slider_multi = $('#slider12a');
                          var slider_uni = $('#slider12b');

                          var new_value_multi = parseFloat(slider_multi.attr("value"));
                          var new_value_uni = parseFloat(slider_uni.attr("value"));
                          
                          $("#out_mult").text(new_value_multi);
                          
                          slider_uni.trigger('slide');
                        }
                     });
            $('#slider12b').slider()
                     .on({
                      slide: function(ev){
                          updateCircleElementColor();

                          var slider_multi = $('#slider12a');
                          var slider_uni = $('#slider12b');

                          var new_value_multi = parseFloat(slider_multi.attr("value"));
                          var new_value_uni = parseFloat(slider_uni.attr("value"));

                          $("#out_uni").text(new_value_uni);
                          $("#out_mult").text(new_value_multi);

                        }
                     });

            //TODO
            var updateElementColorsSlider = function(){
                      updateRectElementColor();
                      updateCircleElementColor();
            }
            $('#checkbox-cor').on('switchChange.bootstrapSwitch', function (event, state) {
                              updateElementColors();
                              if(state){
                                  $("#border-panel").show();
                              }
                              else {
                                  $("#border-panel").hide();
                              }
            });
            $('#checkbox-cor').bootstrapSwitch('state',false);
            $('#checkbox-cor-slider').on('switchChange.bootstrapSwitch', function (event, state) {
                              linked_slider = true;
                              updateElementColorsSlider();
                              
                              if(state){
                                  $("#slider-panel").show();
                              }
                              else {
                                  $("#slider-panel").hide();
                                  $("circle",".detailed-plot").attr("r",2);
                                  $("circle",".sparkline-plot").attr("r",1);
                              }
            });

            $('#slider12a').trigger('slide');


            $('#checkbox-ms').on('switchChange.bootstrapSwitch', function (event, state) {
                      if(state){
                             $(".cycle-plot").show();
                      }
                      else{
                             $(".cycle-plot").hide();
                      }
                      //TODO
            });

            $('#bt-reset').click(function(){
                $(".elem-on").each(function(){
                      var is_element_input = $(this).is("circle"); //true or false
                      var previous_classes = $(this).attr("class");

                      if(is_element_input){
                          $(this).attr("fill",color_array[0]);
                          var r = $(this).attr("r");
                          $(this).attr("r",r/2);
                      }

                      var id = previous_classes.substring(8);
                      $(this).attr("class", "elem-off "+id);
                })
            })

            var updateBorderPanel = function(){
                  $("#b-low").css("background",color_array[1]);
                  $("#b-low").css("color","white");
                  $("#b-low").text(borders[0]+" < low < "+borders[1]);
                  $("#b-med").css("background",color_array[2]);
                  $("#b-med").css("color","white");
                  $("#b-med").text(borders[1]+" < med < "+borders[2]);
                  $("input#b-med").on('change', function(){
                          this.min = borders[0],
                          this.max = borders[2];
                  });
                  $("#b-high").css("background",color_array[3]);
                  $("#b-high").css("color","white");
                  $("#b-high").text(borders[2]+" < high");
                  $("input#b-high").on('change', function(){
                          this.min = borders[1];
                  });
            }

            $('#bt-apply-border').click(function(){
                  borders = [$("input#b-low").val(),$("input#b-med").val(),$("input#b-high").val()];
                  updateElementColors();
                  updateBorderPanel();
            })

            init();
        }, 100);

        setTimeout(function() {
           var setup = function(){
                 //EXTRA setup
                 $("rect").attr("fill",color_array[0]);
                 $(".panel-heading",".sparkline-plot").css("padding",8.7);

                 $("circle",".detailed-plot").attr("r",2);
                 $("circle",".detailed-plot").attr("fill",color_array[0]);
                 $("circle",".sparkline-plot").attr("r",1);
                 $("circle",".sparkline-plot").attr("fill",color_array[0]);

                 $(".detailed-plot").hide();
                 $(".sparkline-plot").show();
                 $(".outlier-detect-panel").hide();
                 
            }
            setup();
        },400);
    });
</script>
-->